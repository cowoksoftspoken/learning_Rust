<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>RustTube</title>
    <link rel="preload" as="image" href="/static/logo/RustTube_logo.png" />
    <link rel="preload" as="image" href="/static/background/sea.avif" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
      }

      .dark body {
        background: #1a202c;
        color: #e2e8f0;
      }

      #progress-fill::after {
        content: attr(data-percent);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        color: white;
        font-weight: bold;
        font-size: 0.9em;
      }
      .hero-bg {
        min-height: 100vh;
        background-image: url("/static/background/under_sea.avif") !important;
      }
      .hero-bg {
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }
    </style>
    <link rel="shortcut icon" href="/static/logo/RustTube_logo.png" />
  </head>

  <body
    class="min-h-screen flex flex-col items-center justify-center p-4 hero-bg text-gray-100"
  >
    <div
      class="relative bg-white/10 dark:bg-gray-900/40 backdrop-blur-xl p-8 rounded-3xl w-full max-w-xl shadow-2xl border border-white/20"
    >
      <img
        src="/static/logo/RustTube_logo.png"
        alt="RustTube Logo"
        class="w-[65%] mx-auto mb-8 drop-shadow-lg"
      />

      <!-- Form Login -->
      <form id="login-form" class="flex flex-col gap-4 mb-6">
        <input
          id="username"
          type="text"
          placeholder="Username"
          class="p-3 bg-white/10 border border-white/20 text-gray-100 placeholder-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition"
          required
        />
        <button
          type="submit"
          class="py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all"
        >
          Login & Dapatkan Token
        </button>
      </form>

      <form id="download-form" class="flex flex-col gap-4 mb-6 hidden">
        <input
          id="url"
          type="text"
          placeholder="Link YouTube / Tiktok / ..."
          required
          class="p-3 bg-white/10 border border-white/20 text-gray-100 placeholder-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
        />
        <select
          id="format"
          class="p-3 bg-gray-900 border border-white/20 text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
        >
          <option value="auto" selected>ðŸ¤– Otomatis</option>
          <option value="mp4">ðŸŽ¬ MP4 (Video)</option>
          <option value="mp3">ðŸŽµ MP3 (Audio)</option>
        </select>
        <button
          type="submit"
          class="py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all"
        >
          Download
        </button>
      </form>
      <div class="mt-2 w-full flex">
        <button
          class="w-full py-3 bg-gradient-to-r from-pink-600 to-red-600 hover:from-red-700 hover:to-pink-700 text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all hidden"
          id="cancel-button"
        >
          Cancel
        </button>
      </div>

      <div id="preview-container" class="mt-6 hidden">
        <h2 class="text-lg font-semibold mb-3 text-white/90">
          ðŸ“º Pratinjau Video:
        </h2>
        <!-- <video
          id="preview-video"
          class="w-full rounded-xl border border-white/20 shadow-lg"
          controls
        ></video> -->
      </div>

      <div
        id="progress-container"
        class="mt-6 bg-white/5 border border-white/20 rounded-xl p-5 hidden"
      >
        <div
          id="progress-text"
          class="text-md mb-3 text-gray-200 flex items-center gap-2"
        >
          âŒ› Menunggu...
        </div>
        <div class="w-full bg-white/10 rounded-lg h-4 overflow-hidden relative">
          <div
            id="progress-fill"
            class="h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg transition-all"
            data-percent="0%"
          ></div>
        </div>
        <div id="download-link-container" class="mt-5 hidden">
          <a
            id="download-link"
            href="#"
            target="_blank"
            class="block py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white text-center rounded-xl font-semibold shadow-md hover:shadow-lg transition"
          >
            â¬‡ Download File
          </a>
        </div>
      </div>
    </div>

    <script
      src="/static/js/script.js"
      data-nonce="{{NONCE}}"
      defer
      crossorigin="anonymous"
      nonce="{{NONCE}}"
    ></script>
  </body>
</html>
